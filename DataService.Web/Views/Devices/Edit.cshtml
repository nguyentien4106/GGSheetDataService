@model DataService.Core.Entities.Device


@{
    ViewData["Title"] = "Edit";
}


<div class="d-flex justify-content-between">
    <h3 class="">Edit Device</h3>
    <div class="">
        <a asp-action="Index" class="btn btn-primary">Back to List</a>
    </div>
</div>
<hr />
<form class="row g-3 needs-validation" novalidate id="needs-validation">
    <input id="id" value="@Model.Id" type="hidden">

    <div class="col-md-4">
        <label for="ip" class="form-label">IP</label>
        <input type="text" class="form-control" id="ip" value="@Model.Ip" required disabled>
    </div>
    <div class="col-md-4">
        <label for="port" class="form-label">Port</label>
        <input type="text" class="form-control" id="port" value="@Model.Port" required>
    </div>
    <div class="col-md-4">
        <label for="commKey" class="form-label">CommKey</label>
        <input type="text" class="form-control" id="commKey" value="@Model.CommKey" required>
    </div>
    <h3>Sheets</h3>
    <hr />
    <div class="sheets">
        @foreach (var sheet in Model.Sheets)
        {
            <div class="row sheet d-flex gap-3 mb-2">
                <input type="text" class="form-control w-10" value="@sheet.Id" hidden>
                <input type="text" class="form-control w-25" placeholder="SheetName" value="@sheet.SheetName" required>
                <input type="text" class="form-control w-50" placeholder="DocumentId" value="@sheet.DocumentId" required>
                <button class="btn btn-danger remove-sheet w-10" type="button">
                    <i class="bi bi-trash"></i>
                </button>

            </div>
        }
        <button id="add-sheet" class="mt-3 btn btn-primary" type="button"><i class="bi bi-plus-circle"> Sheet</i> </button>
    </div>
    <div class="col-12">
        <button class="btn btn-primary" type="submit" id="update-device">Update</button>
    </div>
</form>

<div class="g-3 row d-flex flex-row gap-3 mb-2 d-none" id="templateSheet" >
    <input type="text" class="form-control w-10" value="0" hidden>
    <input type="text" class="form-control w-25" placeholder="SheetName" value="Sheet1" required>
    <input type="text" class="form-control w-50" placeholder="DocumentId" required>
    <button class="btn btn-danger remove-sheet w-10" type="button">
        <i class="bi bi-trash"></i>
    </button>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <script src="~/js/devices/edit.js" asp-append-version="true" type="module"></script>
}
